/* Copyright 2020 Christopher Courtney, aka Drashna Jael're  (@drashna) <drashna@live.com>
 * Copyright 2021 Freznel B. Sta. Ana (freznel@gmail.com) (@freznel10)
 *
 * This program is free software: you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation, either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */

#include "freznel.h"
#include "pointing_device.h"
#include "select_word.h"

#include <math.h>
#include <stdio.h>
#include "ctype.h"

#ifdef HAPTIC_ENABLE
//#include "keyboards/zerf9/mx_track/haptic_utils.h"
#include "drivers/haptic/DRV2605L.h"
#endif

#define DRAGSCROLL_PADDING 6
#define DQT QK_DEBUG_TOGGLE
#define KC_CTUP C(KC_PGUP)
#define KC_CTDN C(KC_PGDN)
#define KC_ADEL LALT_T(KC_DEL)
#define KC_SBT3 S(KC_BTN3)
#define KC_MAC_UNDO LGUI(KC_Z)
#define KC_MAC_CUT LGUI(KC_X)
#define KC_MAC_COPY LGUI(KC_C)
#define KC_MAC_PASTE LGUI(KC_V)
#define KC_PC_UNDO LCTL(KC_Z)
#define KC_PC_CUT LCTL(KC_X)
#define KC_PC_COPY LCTL(KC_C)
#define KC_PC_PASTE LCTL(KC_V)

enum custom_keycodes {
  ST_MACRO_0 = NEW_SAFE_RANGE,
  ST_MACRO_1,
  ST_MACRO_2,
  ST_MACRO_3,
  ST_MACRO_4,
  ST_MACRO_5,
  ST_MACRO_6,
  SELWORD,
};

// clang-format off

#define LAYOUT_5x8_new_wrapper(...) LAYOUT_5x8_new(__VA_ARGS__)
#define LAYOUT_5x8_new_base( \
    K01, K02, K03, K04, K05, K06, K07, K08, K09, K0A, \qmk compile -kb zerf9/chunky2040 -km freznel
    K11, K12, K13, K14, K15, K16, K17, K18, K19, K1A, K1B, \
    K21, K22, K23, K24, K25, K26, K27, K28, K29, K2A  \
  ) \
  LAYOUT_5x8_new_wrapper( \
    KC_MINUS,  ________________NUMBER_LEFT________________,                         KC_BTN3,   KC_MUTE,        KC_MUTE,    KC_BTN3,     ________________NUMBER_RIGHT_______________, KC_EQUAL, \
    KC_RGB_T,         K01,         K02,          K03,         K04,         K05,     KC_BTN2,                               KC_BTN2,     K06,     K07,     K08,     K09,     K0A,     EE_CLR, \
    RGB_TOG1, LGUI_T(K11), LALT_T(K12),  LCTL_T(K13), LSFT_T(K14),         K15,     KC_BTN1,   SM_TG(1),        KC_MUTE,    KC_BTN1,     K16,     RSFT_T(K17),     RCTL_T(K18),     RALT_T(K19),     RGUI_T(K1A),     RALT_T(K1B), \
    LALT_T(KC_DEL), LCTL_T(K21),  K22,          K23,          K24,         K25,     TD_DRGS,       C_R,            SELWORD,    ALT_TAB,     K26,     K27,     K28,     K29, RCTL_T(K2A), KC_BSLS, \
    KC_HOME,        KC_END,      KC_PGDN,   KC_PGUP,                     TAB_RSE, SPC_LSH,   ENT_LWR,        ESC_LWR,    BSP_RSH,     DEL_RSE,          KC_LEFT,  KC_DOWN, KC_UP, KC_RIGHT \
)
#define LAYOUT_base_wrapper(...) LAYOUT_5x8_new_base(__VA_ARGS__)
const uint16_t PROGMEM keymaps[][MATRIX_ROWS][MATRIX_COLS] = {
    [_DEFAULT_LAYER_1] = LAYOUT_base_wrapper(
        ______________COLEMAK_MOD_DH_L1____________, ______________COLEMAK_MOD_DH_R1____________,
        ______________COLEMAK_MOD_DH_L2____________, ______________COLEMAK_MOD_DH_R2____________,
        ______________COLEMAK_MOD_DH_L3____________, ______________COLEMAK_MOD_DH_R3____________
    ),

    [_DEFAULT_LAYER_2] = LAYOUT_base_wrapper(
        ______________COLEMAK_MOD_DH_L1____________, ______________COLEMAK_MOD_DH_R1____________,
        ______________COLEMAK_MOD_DH_L2____________, ______________COLEMAK_MOD_DH_R2____________,
        ______________COLEMAK_MOD_DH_L3____________, ______________COLEMAK_MOD_DH_R3____________
    ),
    [_DEFAULT_LAYER_3] = LAYOUT_base_wrapper(
        _________________QWERTY_L1_________________, _________________QWERTY_R1_________________,
        _________________QWERTY_L2_________________, _________________QWERTY_R2_________________,
        _________________QWERTY_L3_________________, _________________QWERTY_R3_________________
    ),

    [_DEFAULT_LAYER_4] = LAYOUT_base_wrapper(
        _________________DVORAK_L1_________________, _________________DVORAK_R1_________________,
        _________________DVORAK_L2_________________, _________________DVORAK_R2_________________,
        _________________DVORAK_L3_________________, _________________DVORAK_R3_________________
    ),

    [_MOUSE] = LAYOUT_5x8_new(
        _______, _______, _______, _______, _______, _______, _______, _______,          _______,  _______, KC_WH_U, _______, _______, _______, _______, _______,
        _______, C(S(KC_L)), KC_WH_D, KC_WH_U, KC_ESC, _______, _______,                             _______, KC_WH_U, KC_WH_D, S(KC_BTN3), KC_WH_U, _______, _______,
        _______, S(KC_P), KC_BTN2, KC_BTN1, KC_BTN3, KC_BTN4, _______, _______,          _______,  _______, KC_WH_D, KC_LEFT, KC_BTN2, KC_BTN1, KC_BTN3, _______,
        _______, _______, _______, _______, _______, _______, _______, _______,          _______,  _______, KC_BTN7, KC_BTN4, KC_BTN5, KC_BTN8, _______, _______,
        _______, _______, _______, _______,          _______, _______, _______,          _______,  _______, _______,           _______, _______, _______,_______

    ),

    [_LOWER] = LAYOUT_5x8_new_wrapper(
       KC_F12,  _________________FUNC_LEFT_________________, _______, _______,     _______, _______, _________________FUNC_RIGHT________________, KC_F11,
       KC_CAPS, _________________LOWER_L1__________________, _______,                       _______, _________________LOWER_R1__________________, _______,
       _______, _________________LOWER_L2__________________, _______, _______,     _______, _______, _________________LOWER_R2__________________, KC_PIPE,
       _______, _________________LOWER_L3__________________, _______, _______,     _______, _______, _________________LOWER_R3__________________, _______,
       _______, _______, _______, _______,          _______, _______, _______,     _______, _______, _______,         _______, _______,  _______, _______

    ),
    [_RAISE] = LAYOUT_5x8_new_wrapper(
       KC_F12,  _________________FUNC_LEFT_________________, _______, _______,     _______,_______, _________________FUNC_RIGHT________________, KC_F11,
       _______, _________________RAISE_L1__________________, _______,                       _______, _________________RAISE_R1__________________, _______,
       _______, _________________RAISE_L2__________________, _______, _______,     _______, _______, _________________RAISE_R2__________________, KC_BSLS,
       _______, _________________RAISE_L3__________________, _______, _______,     _______, _______, _________________RAISE_R3__________________, _______,
       _______, _______, _______, _______,          _______, _______, _______,     _______, _______, _______,         _______, _______,  _______, _______

    ),
    [_ADJUST] = LAYOUT_5x8_new_wrapper(
       QK_MAKE, _________________FUNC_LEFT_________________, _______,  _______,             _______, _______, _________________FUNC_RIGHT________________, QK_BOOT,
       EE_CLR,  _________________ADJUST_L1_________________, _______,                                _______, _________________ADJUST_R1_________________, EE_CLR,
       KEYLOCK, _________________ADJUST_L2_________________, _______,  AML_TOG,             SNP_TOG, _______, _________________ADJUST_R2_________________, TG_MODS,
       UC_MOD,  _________________ADJUST_L3_________________, DPI_MOD, DPI_RMOD,             DRGSCRL, DQT,     _________________ADJUST_R3_________________, KC_MPLY,
       SH_TT,   _______, _______, _______,           _______, _______, _______,             _______, _______, _______,         _______, _______,  _______, QK_MAKE
    ),
    [_KEYPAD] = LAYOUT_5x8_new_wrapper(
       QK_MAKE, KC_WIDE,KC_AUSSIE,KC_SCRIPT,KC_ZALGO,KC_NOMODE, _______,     _______,     _______,   _______, _________________FUNCA_RIGHT_______________, QK_MAKE,
       VRSN,    ________________NUMPAD1_LEFT_______________ , KC_NUM,                               _______, _________________ADJUST_R1_________________, EE_CLR,
       KEYLOCK, ________________NUMPAD2_LEFT_______________,  KC_BSPC,    _______,     _______,   _______, _________________ADJUST_R2_________________, SH_TG,
       UC_MOD,  ________________NUMPAD3_LEFT_______________ , SNIPING, SNP_TOG,     DRGSCRL,  _______, _________________ADJUST_R3_________________, KC_MPLY,
       _______, _______, _______, _______,              _______, _______, _______,     _______,   _______, _______,         _______, _______,  _______, QK_MAKE
    ),

};
bool process_record_keymap(uint16_t keycode, keyrecord_t *record) {
  // If console is enabled, it will print the matrix position and status of each key pressed
#ifdef CONSOLE_ENABLE
    uprintf("KL: kc: %u, col: %u, row: %u, pressed: %u\n", keycode, record->event.key.col, record->event.key.row, record->event.pressed);
#endif
if(!process_select_word(keycode, record, SELWORD)) { return false; }
  switch (keycode) {
    case ST_MACRO_0:
    if (record->event.pressed) {
      SEND_STRING(SS_RGUI(SS_TAP(X_2)));

    }
    break;
    case ST_MACRO_1:
    if (record->event.pressed) {
      SEND_STRING(SS_TAP(X_MINUS) SS_DELAY(100) SS_LCTL(SS_TAP(X_V)));

    }
    break;
    case ST_MACRO_2:
    if (record->event.pressed) {
      SEND_STRING(SS_TAP(X_BTN1) SS_TAP(X_END) SS_DELAY(100) SS_LCTL(SS_LSFT (SS_TAP(X_LEFT) SS_TAP(X_LEFT))) SS_DELAY(100) SS_LCTL("c"));

    }
    break;
    case ST_MACRO_3:
    if (record->event.pressed) {
      SEND_STRING(SS_LCTL(SS_LSFT(SS_TAP(X_DOWN))));

    }
    break;
    case ST_MACRO_4:
    if (record->event.pressed) {
      SEND_STRING(SS_LCTL(SS_LSFT(SS_TAP(X_UP))));

    }
    break;
    case ST_MACRO_5:
    if (record->event.pressed) {
      SEND_STRING(SS_LCTL(SS_LSFT(SS_TAP(X_RIGHT))));

    }
    break;
    case ST_MACRO_6:
    if (record->event.pressed) {
      SEND_STRING(SS_TAP(X_Y));

    }
    break;
    return false;
  }
  return true;
}



#define BASE_ENCODERS { ENCODER_CCW_CW(KC_VOLD, KC_VOLU), ENCODER_CCW_CW(KC_WH_D, KC_WH_U)}
#ifdef ENCODER_MAP_ENABLE
#    if (defined(KEYBOARD_zerf9_chunky2040) || defined(KEYBOARD_zerf9_space_control_mx))
const uint16_t PROGMEM encoder_map[][NUM_ENCODERS][2] = {
    [_DEFAULT_LAYER_1] = BASE_ENCODERS,
    [_DEFAULT_LAYER_2] = BASE_ENCODERS,
    [_DEFAULT_LAYER_3] = BASE_ENCODERS,
    [_DEFAULT_LAYER_4] = BASE_ENCODERS,
    // [_GAMEPAD]         = { ENCODER_CCW_CW(_______, _______ ), ENCODER_CCW_CW(_______, _______) },
    [_KEYPAD]          = { ENCODER_CCW_CW(_______, _______ ), ENCODER_CCW_CW(KC_WH_D, KC_WH_U) },
    // [_MEDIA]           = { ENCODER_CCW_CW(_______, _______ ), ENCODER_CCW_CW(KC_WH_D, KC_WH_U) },
    [_RAISE]           = { ENCODER_CCW_CW(RGB_VAD, RGB_VAI),  ENCODER_CCW_CW(RGB_SPD, RGB_SPI)  },
    [_LOWER]           = { ENCODER_CCW_CW(RGB_HUD, RGB_HUI), ENCODER_CCW_CW(RGB_SAD, RGB_SAI)  },
    [_ADJUST]          = { ENCODER_CCW_CW(RGB_RMOD, RGB_MOD), ENCODER_CCW_CW(KC_RIGHT, KC_LEFT) },
};
#    elif defined(KEYBOARD_zerf9_mx_track)
const uint16_t PROGMEM encoder_map[][NUM_ENCODERS][2] = {
    [_DEFAULT_LAYER_1] = { ENCODER_CCW_CW(KC_VOLD, KC_VOLU), ENCODER_CCW_CW(KC_VOLD, KC_VOLU), ENCODER_CCW_CW(KC_WH_D, KC_WH_U), ENCODER_CCW_CW(KC_WH_D, KC_WH_U)},
    [_DEFAULT_LAYER_2] = { ENCODER_CCW_CW(KC_VOLD, KC_VOLU), ENCODER_CCW_CW(KC_VOLD, KC_VOLU), ENCODER_CCW_CW(KC_WH_D, KC_WH_U), ENCODER_CCW_CW(KC_WH_D, KC_WH_U)},
    [_DEFAULT_LAYER_3] = { ENCODER_CCW_CW(KC_VOLD, KC_VOLU), ENCODER_CCW_CW(KC_VOLD, KC_VOLU), ENCODER_CCW_CW(KC_WH_D, KC_WH_U), ENCODER_CCW_CW(KC_WH_D, KC_WH_U)},
    [_DEFAULT_LAYER_4] = { ENCODER_CCW_CW(KC_VOLD, KC_VOLU), ENCODER_CCW_CW(KC_VOLD, KC_VOLU), ENCODER_CCW_CW(KC_WH_D, KC_WH_U), ENCODER_CCW_CW(KC_WH_D, KC_WH_U)},
    [_GAMEPAD]         = { ENCODER_CCW_CW(_______, _______ ), ENCODER_CCW_CW(_______, _______), ENCODER_CCW_CW(_______, _______ ), ENCODER_CCW_CW(_______, _______) },
    [_DIABLO]          = { ENCODER_CCW_CW(_______, _______ ), ENCODER_CCW_CW(_______, _______), ENCODER_CCW_CW(_______, _______ ), ENCODER_CCW_CW(_______, _______)  },
    [_KEYPAD]          = { ENCODER_CCW_CW(_______, _______ ), ENCODER_CCW_CW(_______, _______), ENCODER_CCW_CW(KC_WH_D, KC_WH_U), ENCODER_CCW_CW(KC_WH_D, KC_WH_U) },
    [_MEDIA]           = { ENCODER_CCW_CW(_______, _______ ), ENCODER_CCW_CW(_______, _______), ENCODER_CCW_CW(KC_WH_D, KC_WH_U), ENCODER_CCW_CW(KC_WH_D, KC_WH_U) },
    [_RAISE]           = { ENCODER_CCW_CW(RGB_VAD, RGB_VAI), ENCODER_CCW_CW(RGB_VAD, RGB_VAI), ENCODER_CCW_CW(RGB_SPD, RGB_SPI), ENCODER_CCW_CW(RGB_SPD, RGB_SPI)  },
    [_LOWER]           = { ENCODER_CCW_CW(RGB_HUD, RGB_HUI), ENCODER_CCW_CW(RGB_HUD, RGB_HUI), ENCODER_CCW_CW(RGB_SAD, RGB_SAI), ENCODER_CCW_CW(RGB_SAD, RGB_SAI)  },
    [_ADJUST]          = { ENCODER_CCW_CW(RGB_RMOD, RGB_MOD), ENCODER_CCW_CW(RGB_RMOD, RGB_MOD), ENCODER_CCW_CW(KC_RIGHT, KC_LEFT), ENCODER_CCW_CW(KC_RIGHT, KC_LEFT) },
};
#endif
// clang-format on
#else

deferred_token encoder_token  = INVALID_DEFERRED_TOKEN;
static int8_t  last_direction = -1;

static uint32_t encoder_callback(uint32_t trigger_time, void *cb_arg) {
    unregister_code(last_direction ? KC_WH_D : KC_WH_U);
    last_direction = -1;
    return 0;
}

bool encoder_update_user(uint8_t index, bool clockwise) {
#    ifdef SWAP_HANDS_ENABLE
    if (swap_hands) {
        index ^= 1;
    }
#    endif
    if (index == 0) {
        tap_code_delay(clockwise ? KC_VOLD : KC_VOLU, 5);
    } else if (index == 1) {
        if (last_direction != clockwise || encoder_token == INVALID_DEFERRED_TOKEN) {
            uint8_t keycode = clockwise ? KC_WH_D : KC_WH_U;
            last_direction  = clockwise;
            if (encoder_token != INVALID_DEFERRED_TOKEN) {
                if (cancel_deferred_exec(encoder_token)) {
                    encoder_token = INVALID_DEFERRED_TOKEN;
                }
                unregister_code(clockwise ? KC_WH_U : KC_WH_D);
            }
            register_code(keycode);
            encoder_token = defer_exec(MOUSEKEY_WHEEL_DELAY + MOUSEKEY_WHEEL_INTERVAL, encoder_callback, NULL);
        } else {
            extend_deferred_exec(encoder_token, MOUSEKEY_WHEEL_INTERVAL);
        }
    }
    return false;
}
#endif




// void keyboard_post_init_keymap(void) {
//     pointing_device_set_cpi_on_side(true, 100); //Set cpi on left side to a low value for slower scrolling.
//     pointing_device_set_cpi_on_side(false, 8000); //Set cpi on right side to a reasonable value for mousing.
// }


// void keyboard_post_init_keymap(void) {
//     //debug_enable = true;
//     // debug_matrix = true;
//     //debug_keyboard=true;
// }

// #ifdef OLED_ENABLE
// oled_rotation_t oled_init_keymap(oled_rotation_t rotation) { return OLED_ROTATION_180; }

#ifdef OLED_ENABLE
#    include "keyrecords/unicode.h"

oled_rotation_t oled_init_keymap(oled_rotation_t rotation) {
    return OLED_ROTATION_180;
}

#    define frame_size 512
#    define logo_glitch_count 5
#    define logo_glitch_dirty_count 2
#    define text_glitch_count 7
#    define text_glitch_dirty_count 3

static bool     glitch      = true;
static bool     dirty       = false;
static uint8_t  frame_count = 15;
static uint16_t arasaka_timer;

static const char PROGMEM text_clean[frame_size] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80,
    0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80,
    0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0xc0, 0xf0, 0xfc, 0xfe, 0xfe, 0x1f, 0x0f, 0x0f, 0x07, 0x07, 0x07, 0x07, 0x0f, 0x1f, 0xfe, 0xfc,
    0xf8, 0xf0, 0xe0, 0x00, 0xff, 0xff, 0xff, 0xff, 0x8f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f, 0x0f,
    0x0f, 0x0f, 0x3f, 0x3f, 0x3f, 0x3c, 0x00, 0xc0, 0xf0, 0xfc, 0xfe, 0xfe, 0x1f, 0x0f, 0x0f, 0x07,
    0x07, 0x07, 0x07, 0x0f, 0x1f, 0xfe, 0xfc, 0xf8, 0xf0, 0xe0, 0x00, 0x08, 0x18, 0x18, 0x38, 0x78,
    0xf8, 0xf8, 0xf7, 0xe7, 0xe7, 0xc7, 0x87, 0x07, 0x07, 0x06, 0x06, 0x00, 0x00, 0xc0, 0xf0, 0xfc,
    0xfe, 0xfe, 0x1f, 0x0f, 0x0f, 0x07, 0x07, 0x07, 0x07, 0x0f, 0x1f, 0xfe, 0xfc, 0xf8, 0xf0, 0xe0,
    0x00, 0xff, 0xff, 0xff, 0xff, 0xf8, 0x7c, 0x3c, 0x3e, 0x1f, 0x0f, 0x0f, 0x07, 0x03, 0xf3, 0xfd,
    0xfe, 0xfe, 0x1f, 0x0f, 0x0f, 0x07, 0x07, 0x07, 0x07, 0x0f, 0x1f, 0xfe, 0xfc, 0xf8, 0xf0, 0xe0,
    0x01, 0x07, 0x1f, 0x3f, 0x3f, 0x7c, 0x78, 0x78, 0xf0, 0xf0, 0xf0, 0xe0, 0x40, 0x00, 0xff, 0xff,
    0xff, 0xfe, 0xfc, 0x00, 0x1c, 0x1d, 0x1f, 0x1f, 0x0f, 0x1f, 0x1e, 0x3e, 0x7c, 0x78, 0xf8, 0xf0,
    0xe0, 0xc0, 0xc0, 0x80, 0x00, 0x00, 0x00, 0x01, 0x07, 0x1f, 0x3f, 0x3f, 0x7c, 0x78, 0x78, 0xf0,
    0xf0, 0xf0, 0xe0, 0x40, 0x00, 0xff, 0xff, 0xff, 0xfe, 0xfc, 0x00, 0x3e, 0x7e, 0xfe, 0xfe, 0xf0,
    0xf0, 0xf0, 0xf1, 0xf3, 0xf3, 0xff, 0xff, 0xff, 0xff, 0xfe, 0xfc, 0xfc, 0xf8, 0x01, 0x07, 0x1f,
    0x3f, 0x3f, 0x7c, 0x78, 0x78, 0xf0, 0xf0, 0xf0, 0xe0, 0x40, 0x00, 0xff, 0xff, 0xff, 0xfe, 0xfc,
    0x00, 0x1c, 0x1d, 0x1f, 0x1f, 0x0f, 0x1f, 0x1e, 0x3e, 0x3c, 0x78, 0x78, 0xf0, 0xe0, 0xc7, 0xdf,
    0xbf, 0x3f, 0x7c, 0x78, 0x78, 0xf0, 0xf0, 0xf0, 0xe0, 0x40, 0x00, 0xff, 0xff, 0xff, 0xfe, 0xfc,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

static const char PROGMEM text_glitch[text_glitch_count][frame_size] = {
    {
        // frame 1
        // 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0xc0, 0xc0, 0x80, 0x00, 0x00,
        // 0x00, 0x00, 0x00, 0x00, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0x80, 0x80, 0x80,
        // 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xc0,
        // 0xe0, 0xe0, 0xe0, 0xe0, 0xc0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        // 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        // 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        // 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80,
        // 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        // 0xc0, 0xf0, 0xfc, 0xfe, 0xfe, 0x1f, 0x0f, 0x0f, 0x07, 0x07, 0x07, 0x03, 0x07, 0x0f, 0xff, 0xfe,
        // 0xfc, 0x78, 0x70, 0x00, 0x7f, 0xff, 0xff, 0xff, 0xc7, 0x87, 0x07, 0x07, 0x07, 0x0f, 0x0f, 0x0f,
        // 0x0f, 0x0f, 0x3f, 0x3f, 0x3f, 0x3c, 0x00, 0xc0, 0xf0, 0xfc, 0xfe, 0xfe, 0x1f, 0x0f, 0x03, 0x01,
        // 0x01, 0x01, 0x03, 0x03, 0x07, 0xff, 0xff, 0xfe, 0x7c, 0x78, 0x00, 0x82, 0x86, 0x86, 0x8e, 0x1e,
        // 0x3e, 0xf8, 0xf7, 0xe7, 0xe7, 0xc7, 0x87, 0x3c, 0x38, 0x30, 0x06, 0x00, 0x00, 0xc0, 0xe0, 0xf0,
        // 0xf8, 0xf8, 0x7c, 0x3c, 0x07, 0x03, 0x1e, 0x1e, 0x3e, 0x3e, 0xfc, 0xf8, 0xf0, 0xe0, 0xc0, 0x80,
        // 0x00, 0xff, 0xff, 0xff, 0xff, 0xf8, 0x7c, 0x3c, 0x3e, 0x1f, 0x0f, 0x0f, 0x07, 0x03, 0xf3, 0xfd,
        // 0xfe, 0xfe, 0x1f, 0x0f, 0x0f, 0x07, 0x07, 0x07, 0x07, 0x0f, 0x1f, 0xfe, 0xfc, 0xf8, 0xf0, 0xe0,
        // 0x01, 0x07, 0x1f, 0x3f, 0x3f, 0x7c, 0x78, 0x78, 0xf0, 0xf0, 0xf0, 0x70, 0x60, 0x00, 0x7f, 0x7f,
        // 0x7f, 0x7f, 0x7e, 0x00, 0x0e, 0x0e, 0x0f, 0x0f, 0x07, 0x0f, 0x1f, 0x1f, 0x3e, 0xf8, 0xf8, 0xf0,
        // 0xe0, 0xe0, 0xc0, 0x80, 0x80, 0x00, 0x00, 0x01, 0x07, 0x1f, 0x3f, 0x3f, 0x7c, 0x78, 0x1e, 0x3c,
        // 0x3c, 0x3c, 0x38, 0x30, 0x00, 0x3f, 0x3f, 0x3f, 0x3f, 0x3e, 0x00, 0x0f, 0x1f, 0x3f, 0x3f, 0x3c,
        // 0x3c, 0xf0, 0xf1, 0xf3, 0xf3, 0xff, 0xff, 0xf8, 0xf8, 0xf0, 0xfc, 0xfc, 0xf8, 0x01, 0x3f, 0x7f,
        // 0xff, 0xff, 0xf0, 0xe0, 0x3c, 0x78, 0xc0, 0xc0, 0x80, 0x00, 0x00, 0xff, 0xff, 0xff, 0xdf, 0x9f,
        // 0x00, 0x39, 0x3b, 0x3f, 0x3f, 0x0f, 0x1f, 0x1e, 0x3e, 0x7c, 0x78, 0xf8, 0xf0, 0xe0, 0xe7, 0xdf,
        // 0xbf, 0xbf, 0x7c, 0x78, 0x78, 0xf0, 0xf0, 0xf0, 0xe0, 0x40, 0x00, 0xff, 0xff, 0xff, 0xfd, 0xf9,
        // 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        // 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        // 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        // 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        // 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        // 0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 0x03, 0x03, 0x03, 0x03, 0x00, 0x03, 0x03, 0x03, 0x03, 0x03,
        // 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        // 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
        0x00, 0x8e, 0x8f, 0x8e, 0x84, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80,
        0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x86, 0x8f, 0x8f, 0x8e, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0xc3, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0xe3, 0xe0, 0xe0, 0xc0, 0x03, 0x07, 0x07, 0xc7, 0xe7,
        0xe7, 0xc7, 0x07, 0x07, 0x03, 0xc0, 0xe0, 0xe0, 0xe3, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0xc3, 0x00,
        0x00, 0x08, 0xcc, 0xec, 0x3c, 0x1c, 0x08, 0xf8, 0xf8, 0x4c, 0x4c, 0x4c, 0x08, 0x00, 0x80, 0xf8,
        0x8c, 0x8c, 0x88, 0xd8, 0x78, 0x00, 0xf8, 0xfc, 0xcc, 0xcc, 0x48, 0x00, 0x00, 0x00, 0x00, 0x08,
        0xb8, 0xf0, 0xf0, 0xb8, 0x08, 0x00, 0x0c, 0x1c, 0xfc, 0x0c, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0x01, 0x01, 0x01, 0xf0, 0xf0, 0xf0, 0xf1, 0xf1,
        0xf1, 0xf1, 0xf0, 0xf0, 0x70, 0x01, 0x01, 0x01, 0x71, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0x71, 0x00,
        0x02, 0x07, 0x07, 0x06, 0x06, 0x06, 0x00, 0x03, 0x07, 0x06, 0x06, 0x06, 0x06, 0x00, 0x01, 0x03,
        0x01, 0x00, 0x01, 0x03, 0x02, 0x00, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02,
        0x03, 0x00, 0x00, 0x01, 0x03, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x38, 0x78, 0x38, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x38, 0x38, 0x38, 0x38, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00e
    },
    {
        // frame 2
0x00, 0x8e, 0x8f, 0x8e, 0x84, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80,
0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x86, 0x8f, 0x8f, 0x8e, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0xc3, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0xe3, 0xe0, 0xe0, 0xc0, 0x03, 0x07, 0x07, 0xc7, 0xe7,
0xe7, 0xc7, 0x07, 0x07, 0x03, 0xc0, 0xe0, 0xe0, 0xe3, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0xc3, 0x00,
0x00, 0x08, 0xcc, 0xec, 0x3c, 0x1c, 0x08, 0xf8, 0xf8, 0x4c, 0x4c, 0x4c, 0x08, 0x00, 0x80, 0xf8,
0x8c, 0x8c, 0x88, 0xd8, 0x78, 0x00, 0xf8, 0xfc, 0xcc, 0xcc, 0x48, 0x00, 0x00, 0x00, 0x00, 0x08,
0xb8, 0xf0, 0xf0, 0xb8, 0x08, 0x00, 0x0c, 0x1c, 0xfc, 0x0c, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0x01, 0x01, 0x01, 0xf0, 0xf0, 0xf0, 0xf1, 0xf1,
0xf1, 0xf1, 0xf0, 0xf0, 0x70, 0x01, 0x01, 0x01, 0x71, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0x71, 0x00,
0x02, 0x07, 0x07, 0x06, 0x06, 0x06, 0x00, 0x03, 0x07, 0x06, 0x06, 0x06, 0x06, 0x00, 0x01, 0x03,
0x01, 0x00, 0x01, 0x03, 0x02, 0x00, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02,
0x03, 0x00, 0x00, 0x01, 0x03, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x38, 0x78, 0x38, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x38, 0x38, 0x38, 0x38, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    },
    {
        // frame 3
0x00, 0x8e, 0x8f, 0x8e, 0x84, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80,
0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x86, 0x8f, 0x8f, 0x8e, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0xc3, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0xe3, 0xe0, 0xe0, 0xc0, 0x03, 0x07, 0x07, 0xc7, 0xe7,
0xe7, 0xc7, 0x07, 0x07, 0x03, 0xc0, 0xe0, 0xe0, 0xe3, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0xc3, 0x00,
0x00, 0x08, 0xcc, 0xec, 0x3c, 0x1c, 0x08, 0xf8, 0xf8, 0x4c, 0x4c, 0x4c, 0x08, 0x00, 0x80, 0xf8,
0x8c, 0x8c, 0x88, 0xd8, 0x78, 0x00, 0xf8, 0xfc, 0xcc, 0xcc, 0x48, 0x00, 0x00, 0x00, 0x00, 0x08,
0xb8, 0xf0, 0xf0, 0xb8, 0x08, 0x00, 0x0c, 0x1c, 0xfc, 0x0c, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0x01, 0x01, 0x01, 0xf0, 0xf0, 0xf0, 0xf1, 0xf1,
0xf1, 0xf1, 0xf0, 0xf0, 0x70, 0x01, 0x01, 0x01, 0x71, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0x71, 0x00,
0x02, 0x07, 0x07, 0x06, 0x06, 0x06, 0x00, 0x03, 0x07, 0x06, 0x06, 0x06, 0x06, 0x00, 0x01, 0x03,
0x01, 0x00, 0x01, 0x03, 0x02, 0x00, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02,
0x03, 0x00, 0x00, 0x01, 0x03, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x38, 0x78, 0x38, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x38, 0x38, 0x38, 0x38, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    },
    {
        // frame 4
0x00, 0x8e, 0x8f, 0x8e, 0x84, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80,
0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x86, 0x8f, 0x8f, 0x8e, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0xc3, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0xe3, 0xe0, 0xe0, 0xc0, 0x03, 0x07, 0x07, 0xc7, 0xe7,
0xe7, 0xc7, 0x07, 0x07, 0x03, 0xc0, 0xe0, 0xe0, 0xe3, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0xc3, 0x00,
0x00, 0x08, 0xcc, 0xec, 0x3c, 0x1c, 0x08, 0xf8, 0xf8, 0x4c, 0x4c, 0x4c, 0x08, 0x00, 0x80, 0xf8,
0x8c, 0x8c, 0x88, 0xd8, 0x78, 0x00, 0xf8, 0xfc, 0xcc, 0xcc, 0x48, 0x00, 0x00, 0x00, 0x00, 0x08,
0xb8, 0xf0, 0xf0, 0xb8, 0x08, 0x00, 0x0c, 0x1c, 0xfc, 0x0c, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0x01, 0x01, 0x01, 0xf0, 0xf0, 0xf0, 0xf1, 0xf1,
0xf1, 0xf1, 0xf0, 0xf0, 0x70, 0x01, 0x01, 0x01, 0x71, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0x71, 0x00,
0x02, 0x07, 0x07, 0x06, 0x06, 0x06, 0x00, 0x03, 0x07, 0x06, 0x06, 0x06, 0x06, 0x00, 0x01, 0x03,
0x01, 0x00, 0x01, 0x03, 0x02, 0x00, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02,
0x03, 0x00, 0x00, 0x01, 0x03, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x38, 0x78, 0x38, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x38, 0x38, 0x38, 0x38, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    },
    {
        // frame 5
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0xc0,
        0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0,
        0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0xc0, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0xe0, 0xc0, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0xf0, 0xf0, 0xf0, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80,
        0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0xc0, 0xc0, 0xf0, 0xf8, 0x78, 0x3c, 0x3c, 0x3c, 0x1c, 0x1e, 0x07, 0x07, 0x8f,
        0xff, 0xff, 0xfe, 0x7c, 0x70, 0x80, 0xf8, 0xff, 0xff, 0xff, 0x47, 0x07, 0x07, 0x07, 0x07, 0x07,
        0x07, 0x07, 0x07, 0x07, 0x1f, 0x1f, 0x1f, 0x9f, 0x86, 0xe0, 0xf8, 0xf8, 0xfc, 0xfe, 0x1e, 0x0f,
        0x0f, 0x0f, 0x07, 0x07, 0x07, 0x0f, 0x1f, 0xff, 0xff, 0xff, 0x1f, 0xdc, 0xc0, 0xc0, 0xc3, 0x03,
        0x07, 0x0f, 0x3f, 0x7f, 0x7f, 0xfc, 0xfc, 0xf8, 0x87, 0x07, 0x07, 0x07, 0x06, 0x18, 0x00, 0x00,
        0xc0, 0xe0, 0xf0, 0xf8, 0x78, 0x3c, 0x3c, 0x3c, 0x1c, 0x1e, 0x1e, 0x3e, 0xfe, 0xfc, 0xf8, 0xf0,
        0xe0, 0x80, 0x00, 0xc0, 0xfe, 0xfe, 0xfe, 0xfe, 0xe0, 0xf0, 0xf0, 0x78, 0x3c, 0x3c, 0x3e, 0x07,
        0xf3, 0xf3, 0xfd, 0xfe, 0x1e, 0x0f, 0x0f, 0x0f, 0x07, 0x07, 0x07, 0x07, 0x1f, 0xff, 0xfe, 0xfc,
        0xdc, 0xdc, 0xdf, 0xd3, 0xc3, 0xc3, 0xc3, 0xc0, 0xc0, 0x80, 0x00, 0xc0, 0x7c, 0x0c, 0x3f, 0x3f,
        0x3f, 0x63, 0xd7, 0x14, 0x16, 0x16, 0x07, 0x0f, 0x1f, 0x1f, 0x1f, 0x1f, 0x3e, 0x78, 0x70, 0x70,
        0x60, 0x60, 0x60, 0x40, 0x40, 0x00, 0x00, 0x08, 0x1b, 0x1b, 0x3f, 0x73, 0xf0, 0xe0, 0xe0, 0xe0,
        0xc0, 0x80, 0x80, 0xf4, 0x74, 0x3f, 0x1f, 0x1e, 0x1b, 0x1f, 0x04, 0x07, 0x0f, 0x1f, 0x1f, 0x1e,
        0x1e, 0x1e, 0x1e, 0x1e, 0x1e, 0x1f, 0xff, 0xff, 0xff, 0xfe, 0xf8, 0x04, 0x3c, 0x7c, 0xfc, 0xff,
        0xf3, 0xe3, 0xe3, 0xc3, 0xc0, 0xc0, 0x80, 0x00, 0x00, 0xfc, 0xfc, 0xfc, 0xfc, 0xff, 0x03, 0x73,
        0x77, 0x7f, 0x7c, 0x3f, 0x7f, 0x7b, 0xfb, 0xf3, 0xe1, 0xe0, 0xc0, 0x80, 0x9c, 0xdc, 0xfc, 0xff,
        0xbf, 0xbb, 0x78, 0x70, 0x70, 0xf0, 0xe0, 0xc0, 0xc0, 0xfc, 0x3c, 0xff, 0xff, 0xff, 0xc3, 0xc3,
        0x00, 0x01, 0x01, 0x01, 0x01, 0x03, 0x01, 0x01, 0x03, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01,
        0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x01, 0x01, 0x01, 0x03, 0x03, 0x03, 0x03, 0x03, 0x00, 0x03, 0x03, 0x03, 0x03, 0x03,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x03, 0x03, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    },
    {
        // frame 6
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0xc0, 0xc0, 0xc0, 0xc0, 0x80, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0xc0, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80,
        0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0xe0, 0xc0, 0x80, 0x00, 0x00, 0x00,
        0xc0, 0xf0, 0xf0, 0xfc, 0xf8, 0x78, 0x3c, 0x3c, 0x3c, 0x1c, 0x1e, 0x1e, 0x1e, 0x7e, 0xfc, 0xf8,
        0xf0, 0xe0, 0x80, 0x00, 0xc0, 0xff, 0xff, 0xff, 0x8f, 0x0f, 0x0f, 0x0f, 0x0f, 0x7c, 0x7c, 0x7c,
        0x1f, 0x1f, 0x7f, 0x7f, 0x7e, 0x7e, 0x18, 0x80, 0xe0, 0xe0, 0xf8, 0xf0, 0xf0, 0x78, 0x78, 0x78,
        0x38, 0x3c, 0x3c, 0x7c, 0xfc, 0xf8, 0xf0, 0xe0, 0xc0, 0x00, 0x00, 0x00, 0xc0, 0xc0, 0xc0, 0xc0,
        0xc0, 0xc0, 0xc0, 0x3c, 0xe7, 0xc7, 0x87, 0x07, 0x07, 0x07, 0x03, 0x03, 0x00, 0xe0, 0xf8, 0xfc,
        0xfe, 0xff, 0x0f, 0x07, 0x07, 0x07, 0x03, 0x03, 0x03, 0x07, 0x1f, 0xff, 0xff, 0xfe, 0xfc, 0xf0,
        0x00, 0x78, 0xff, 0xff, 0xff, 0xff, 0xf0, 0x78, 0x78, 0x3c, 0x1e, 0x1e, 0x1f, 0x07, 0xf3, 0xf3,
        0xfd, 0xfe, 0x3d, 0x1e, 0x1e, 0x1e, 0x07, 0x07, 0x07, 0x07, 0x07, 0xff, 0xff, 0xff, 0xfe, 0xf8,
        0x01, 0x07, 0x1f, 0x3f, 0xff, 0xf0, 0xe0, 0xe0, 0xc0, 0xc0, 0xc0, 0x80, 0x00, 0x00, 0xff, 0xff,
        0xff, 0xef, 0xcf, 0x00, 0x73, 0x1d, 0x1f, 0x1f, 0x0f, 0x1f, 0x3e, 0x3e, 0x7c, 0xf0, 0xf0, 0xf0,
        0xf0, 0xf0, 0xf0, 0xa0, 0xa0, 0x00, 0x00, 0x03, 0x0f, 0x0f, 0x0f, 0x3f, 0x60, 0x40, 0x40, 0xc0,
        0xc0, 0xc0, 0xc0, 0xc0, 0x00, 0xff, 0xff, 0xff, 0x9f, 0xdf, 0x00, 0x30, 0x70, 0xf0, 0xf1, 0xc3,
        0xc7, 0xc7, 0xcf, 0xdf, 0xf3, 0xff, 0xff, 0xff, 0xff, 0xfe, 0x7e, 0x7e, 0x7c, 0x00, 0x07, 0x0f,
        0x1f, 0x1f, 0x3e, 0x3c, 0x3c, 0x78, 0x78, 0x78, 0x70, 0x60, 0x00, 0x7f, 0x7f, 0x7f, 0x7b, 0x73,
        0x00, 0x0e, 0x0e, 0x0f, 0x3f, 0x1f, 0x3e, 0x3c, 0x7c, 0xf8, 0xf0, 0xf0, 0xe0, 0xe0, 0xe7, 0xdf,
        0xbf, 0xbf, 0xf8, 0xf0, 0xf0, 0xe0, 0xf0, 0xf0, 0xe0, 0xc0, 0x00, 0x3f, 0x3f, 0x3f, 0x3e, 0x3c,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x03, 0x03, 0x03, 0x03, 0x01, 0x00, 0x03, 0x03,
        0x03, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x03, 0x03, 0x03,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    },
    {
        // frame 7
        0x00, 0x00, 0x00, 0x00, 0x00, 0x1e, 0x0f, 0x00, 0x00, 0x00, 0xe0, 0xe0, 0xe0, 0x0f, 0x3f, 0xf0,
        0xe0, 0xc0, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x80, 0x1f, 0x1f, 0x1f, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x3f, 0x0c, 0xc0, 0xf0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x3c, 0x7c, 0xfc, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x80, 0xf0, 0x80, 0x80, 0x80, 0x1e, 0x1c, 0x0c, 0x0c, 0x00, 0x00, 0x00, 0x00,
        0x00, 0xf8, 0x78, 0x3c, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0x07, 0xf3, 0x80,
        0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x80, 0xe0, 0xfc, 0xf8, 0xf0, 0x00, 0x00,
        0xc0, 0xf0, 0xf0, 0xfc, 0xf8, 0x7c, 0x78, 0x80, 0x80, 0x38, 0x01, 0x01, 0x01, 0x00, 0x00, 0x03,
        0x03, 0x03, 0x03, 0x00, 0x03, 0xf8, 0xf8, 0xf8, 0x00, 0x0f, 0x7c, 0x7c, 0xf8, 0x7c, 0x7c, 0x7c,
        0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x01, 0x07, 0xe0, 0xf8, 0xf0, 0xf0, 0x00, 0x00, 0x00,
        0x38, 0x3c, 0xc0, 0xc0, 0x00, 0xf8, 0xf0, 0xe0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xc0,
        0xc0, 0xf8, 0xf8, 0xe7, 0x7c, 0xc7, 0x87, 0x07, 0xfc, 0xf8, 0xf8, 0xf8, 0x00, 0xe0, 0xf8, 0xfc,
        0xfe, 0xff, 0xf0, 0xe0, 0x07, 0x07, 0x70, 0x78, 0x78, 0xf8, 0xf8, 0xff, 0xff, 0x80, 0x00, 0x00,
        0x00, 0x3c, 0x7f, 0xf0, 0xc0, 0xff, 0xf0, 0x78, 0x78, 0x3c, 0x1e, 0x1e, 0xe0, 0xe0, 0xe7, 0xf3,
        0xfd, 0xfe, 0x3d, 0x1e, 0x1e, 0x1e, 0x07, 0x3c, 0x3c, 0x07, 0x07, 0xff, 0xff, 0xff, 0xfe, 0xf8,
        0x01, 0x07, 0x1f, 0x3f, 0xff, 0x00, 0x00, 0x07, 0x07, 0x00, 0xc0, 0x80, 0x00, 0x00, 0xfe, 0xfe,
        0xfe, 0xfe, 0xfe, 0x00, 0x72, 0x1f, 0x1f, 0x1f, 0x7c, 0x1f, 0x00, 0x00, 0x02, 0xf0, 0xf0, 0xf0,
        0x0f, 0x0f, 0x3f, 0x3f, 0x3f, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x0f, 0x3f, 0x60, 0x1e, 0x1e, 0x1e,
        0xc0, 0xc0, 0x00, 0x00, 0x00, 0xff, 0xff, 0xff, 0xf8, 0xe0, 0x00, 0x00, 0x18, 0x18, 0x38, 0xc3,
        0xc7, 0x18, 0x19, 0x1b, 0x1e, 0xff, 0xff, 0xff, 0x03, 0x03, 0x01, 0x01, 0x7c, 0x00, 0x07, 0x0f,
        0x1f, 0x00, 0x01, 0x01, 0x3c, 0x78, 0x00, 0x00, 0x00, 0x00, 0x03, 0x7f, 0x7f, 0xff, 0xff, 0xfc,
        0x00, 0x07, 0x07, 0xff, 0xff, 0x1f, 0x3e, 0x3c, 0x7c, 0xf8, 0xf0, 0xf0, 0x01, 0x00, 0x00, 0xdf,
        0xbf, 0xbf, 0xf8, 0xf0, 0xf0, 0xe0, 0xf0, 0x80, 0x00, 0xc0, 0x00, 0x03, 0x03, 0x03, 0x3f, 0x3f,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x3c, 0x78, 0x78, 0x03, 0x03, 0x03, 0x00, 0x03, 0x03,
        0x03, 0x03, 0x03, 0x00, 0x00, 0xe0, 0xf0, 0xf0, 0x7c, 0x00, 0x00, 0x00, 0x00, 0x03, 0x03, 0x03,
        0x78, 0x78, 0x78, 0x50, 0x50, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x10, 0x10, 0x30,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x1f, 0x1f, 0x00, 0x06, 0x0e, 0x1e, 0x1e, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0f, 0x0f, 0x0e, 0x0c, 0x00, 0x00, 0x00, 0x1f, 0x1f, 0x1f,
        0x00, 0x00, 0x00, 0x03, 0x0f, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    }
};

static const char PROGMEM text_glitch_dirty[text_glitch_dirty_count][frame_size] = {
    {
        // frame 1
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x80, 0xe0, 0xf8, 0xfc, 0xfc, 0x3e, 0x1e, 0x1e, 0x0e, 0x0f, 0x0f, 0x0f, 0x1f, 0x3e, 0xfc, 0xf8,
        0xf0, 0xe0, 0xc0, 0x00, 0xff, 0xff, 0xff, 0xff, 0x1f, 0x1f, 0x1f, 0x1f, 0x1f, 0x1f, 0x1f, 0x1f,
        0x1f, 0x1f, 0x7f, 0x7e, 0x7e, 0x78, 0x00, 0x80, 0xe0, 0xf8, 0xfc, 0xfc, 0x3e, 0x1e, 0x1e, 0x0e,
        0x0f, 0x0f, 0x1f, 0x1f, 0x3e, 0xfc, 0xf8, 0xf0, 0xe0, 0xc0, 0x00, 0x10, 0x30, 0x18, 0x38, 0x78,
        0xf8, 0xf8, 0xf7, 0xe7, 0xe7, 0xc7, 0x87, 0x07, 0x07, 0x06, 0x06, 0x00, 0x00, 0x80, 0xf0, 0xf8,
        0xfc, 0xfc, 0x3e, 0x3c, 0x3c, 0x0e, 0x0f, 0x0f, 0x1f, 0x1f, 0x7e, 0xfc, 0xf8, 0xf0, 0xe0, 0xc0,
        0x00, 0xff, 0xff, 0xff, 0xff, 0xf0, 0xf8, 0x78, 0x7c, 0x3e, 0x1e, 0x1f, 0x0f, 0x07, 0xe7, 0xfb,
        0xfd, 0xfd, 0x3e, 0x1e, 0x1e, 0x0e, 0x0f, 0x0f, 0x0f, 0x1f, 0x3e, 0xfc, 0xf8, 0xf0, 0xe0, 0xc0,
        0x01, 0x07, 0x1f, 0x3f, 0x3f, 0x7c, 0x78, 0x78, 0xf0, 0xf0, 0xf0, 0xe0, 0x40, 0x00, 0xff, 0xff,
        0xff, 0xfb, 0xf3, 0x00, 0x1d, 0x1d, 0x1f, 0x1f, 0x0f, 0x1e, 0x3e, 0x3e, 0x7c, 0xf8, 0xf8, 0xf0,
        0xe0, 0xe0, 0xc0, 0x80, 0x80, 0x00, 0x00, 0x01, 0x07, 0x1f, 0x3f, 0x3f, 0x7c, 0x78, 0x78, 0xf0,
        0xf0, 0xf0, 0xe0, 0x40, 0x00, 0xff, 0xff, 0xff, 0xfb, 0xf3, 0x00, 0x3e, 0x7e, 0x7f, 0x7f, 0x78,
        0x78, 0x78, 0x78, 0x79, 0x79, 0x7f, 0x7f, 0x7f, 0x7f, 0x7f, 0x7e, 0x7e, 0x7c, 0x01, 0x0f, 0x1f,
        0x3f, 0x3f, 0x7c, 0xf0, 0xf0, 0xe0, 0xe0, 0xe0, 0xc0, 0x80, 0x00, 0xff, 0xff, 0xff, 0xfd, 0xf9,
        0x00, 0x39, 0x3b, 0x3f, 0x3f, 0x1f, 0x3e, 0x3c, 0x7c, 0xf8, 0xf0, 0xf0, 0xe0, 0xc0, 0xcf, 0xbf,
        0x7f, 0x7f, 0xf8, 0xf0, 0xf0, 0xe0, 0xe0, 0xe0, 0xc0, 0x80, 0x00, 0xff, 0xff, 0xff, 0xfb, 0xf3,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01,
        0x01, 0x01, 0x00, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x00, 0x00, 0x01, 0x01, 0x01, 0x01, 0x01

    },
    {
        // frame 2
0x00, 0x8e, 0x8f, 0x8e, 0x84, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80,
0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x86, 0x8f, 0x8f, 0x8e, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0xc3, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0xe3, 0xe0, 0xe0, 0xc0, 0x03, 0x07, 0x07, 0xc7, 0xe7,
0xe7, 0xc7, 0x07, 0x07, 0x03, 0xc0, 0xe0, 0xe0, 0xe3, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0xc3, 0x00,
0x00, 0x08, 0xcc, 0xec, 0x3c, 0x1c, 0x08, 0xf8, 0xf8, 0x4c, 0x4c, 0x4c, 0x08, 0x00, 0x80, 0xf8,
0x8c, 0x8c, 0x88, 0xd8, 0x78, 0x00, 0xf8, 0xfc, 0xcc, 0xcc, 0x48, 0x00, 0x00, 0x00, 0x00, 0x08,
0xb8, 0xf0, 0xf0, 0xb8, 0x08, 0x00, 0x0c, 0x1c, 0xfc, 0x0c, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0x01, 0x01, 0x01, 0xf0, 0xf0, 0xf0, 0xf1, 0xf1,
0xf1, 0xf1, 0xf0, 0xf0, 0x70, 0x01, 0x01, 0x01, 0x71, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0x71, 0x00,
0x02, 0x07, 0x07, 0x06, 0x06, 0x06, 0x00, 0x03, 0x07, 0x06, 0x06, 0x06, 0x06, 0x00, 0x01, 0x03,
0x01, 0x00, 0x01, 0x03, 0x02, 0x00, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02,
0x03, 0x00, 0x00, 0x01, 0x03, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x38, 0x78, 0x38, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x38, 0x38, 0x38, 0x38, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    },
    {
        // frame 3
0x00, 0x8e, 0x8f, 0x8e, 0x84, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x80, 0x80,
0x80, 0x80, 0x80, 0x80, 0x80, 0x00, 0x00, 0x00, 0x80, 0x80, 0x80, 0x86, 0x8f, 0x8f, 0x8e, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0xc3, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0xe3, 0xe0, 0xe0, 0xc0, 0x03, 0x07, 0x07, 0xc7, 0xe7,
0xe7, 0xc7, 0x07, 0x07, 0x03, 0xc0, 0xe0, 0xe0, 0xe3, 0xe7, 0xe7, 0xe7, 0xe7, 0xe7, 0xc3, 0x00,
0x00, 0x08, 0xcc, 0xec, 0x3c, 0x1c, 0x08, 0xf8, 0xf8, 0x4c, 0x4c, 0x4c, 0x08, 0x00, 0x80, 0xf8,
0x8c, 0x8c, 0x88, 0xd8, 0x78, 0x00, 0xf8, 0xfc, 0xcc, 0xcc, 0x48, 0x00, 0x00, 0x00, 0x00, 0x08,
0xb8, 0xf0, 0xf0, 0xb8, 0x08, 0x00, 0x0c, 0x1c, 0xfc, 0x0c, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0x01, 0x01, 0x01, 0xf0, 0xf0, 0xf0, 0xf1, 0xf1,
0xf1, 0xf1, 0xf0, 0xf0, 0x70, 0x01, 0x01, 0x01, 0x71, 0xf1, 0xf1, 0xf1, 0xf1, 0xf1, 0x71, 0x00,
0x02, 0x07, 0x07, 0x06, 0x06, 0x06, 0x00, 0x03, 0x07, 0x06, 0x06, 0x06, 0x06, 0x00, 0x01, 0x03,
0x01, 0x00, 0x01, 0x03, 0x02, 0x00, 0x03, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x02,
0x03, 0x00, 0x00, 0x01, 0x03, 0x00, 0x00, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x38, 0x78, 0x38, 0x10, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x38, 0x38, 0x38, 0x38, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
    }
};

void arasaka_text_clean(void) { oled_write_raw_P(text_clean, frame_size); }

void arasaka_text_glitch_dirty(void) { oled_write_raw_P(text_glitch_dirty[rand() % text_glitch_dirty_count], sizeof(text_glitch_dirty[0])); }

void arasaka_text_glitch(bool can_be_dirty) {
    uint8_t frame = can_be_dirty ? rand() % (text_glitch_count + text_glitch_dirty_count) : rand() % text_glitch_count;

    if (frame < text_glitch_count) {
        oled_write_raw_P(text_glitch[frame], sizeof(text_glitch[0]));

        return;
    }

    arasaka_text_glitch_dirty();
}

void arasaka_draw(void) {
    uint16_t timer = timer_elapsed(arasaka_timer);

    if (timer < 150) {
        arasaka_text_glitch_dirty();
        return;
    }

    if (timer < 250) {
        arasaka_text_glitch(true);
        return;
    }

    if (timer > 9750 && timer < 9850) {
        arasaka_text_glitch(true);
        return;
    }

    if (timer > 9850 && timer < 10000) {
        arasaka_text_glitch_dirty();
        return;
    }

    if (timer > 10000) {
        arasaka_timer = timer_read();
    }

    if (glitch && 0 != frame_count) {
        frame_count--;
        arasaka_text_glitch(true);
        return;
    }

    glitch = false;
    dirty  = false;

    arasaka_text_clean();

    if (1 == rand() % 60) {
        glitch      = true;
        frame_count = 1 + rand() % 4;
        return;
    }

    if (1 == rand() % 60) {
        glitch      = true;
        frame_count = 1 + rand() % 10;
        dirty       = frame_count > 5;
    }
}

void oled_render_large_display(bool side) {
    if (side) {
        render_wpm_graph(56, 64);
    } else {
        // oled_advance_page(true);

        // clang-format off
        static const char PROGMEM qmk_logo[] = {
    0xff, 0xff, 0xff, 0xff, 0xff, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0xff, 0x3f, 0x3f,
	0x3f, 0x3f, 0x3f, 0x3f, 0x7f, 0x7f, 0xff, 0xff, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x7f,
	0xff, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0xbf, 0xff, 0x3f, 0x7f, 0xff, 0xff, 0xff,
	0xff, 0xff, 0x3f, 0x3f, 0x3f, 0xff, 0xff, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0xff, 0x7f,
	0x3f, 0x3f, 0xff, 0xff, 0xff, 0xff, 0x3f, 0x3f, 0x3f, 0x3f, 0x3f, 0xff, 0xff, 0xff, 0x7f, 0x3f,
	0x3f, 0x3f, 0x3f, 0x7f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
	0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0x7f, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
	0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
	0xff, 0xff, 0xff, 0xff, 0xff, 0x00, 0x00, 0x00, 0xc6, 0xc6, 0xc6, 0xc6, 0xff, 0xff, 0x00, 0x00,
	0x46, 0xc6, 0x86, 0x02, 0x00, 0x60, 0xff, 0xff, 0x00, 0x00, 0x00, 0x46, 0x46, 0x46, 0x46, 0x7f,
	0xff, 0x7e, 0x1e, 0x06, 0x02, 0x40, 0x70, 0x7c, 0x7e, 0x7f, 0xff, 0x00, 0x00, 0x00, 0xf1, 0xe1,
	0xc3, 0x87, 0x00, 0x00, 0x00, 0xff, 0xff, 0x00, 0x00, 0x46, 0x46, 0x46, 0x46, 0x6e, 0xff, 0x00,
	0x00, 0x00, 0x7f, 0x7f, 0x7f, 0x7f, 0xfe, 0xfe, 0x00, 0x00, 0x00, 0xff, 0xe7, 0x00, 0x00, 0x3e,
	0x7f, 0x7f, 0x3e, 0x00, 0x00, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
	0xff, 0xff, 0xff, 0xff, 0xe7, 0x24, 0x81, 0x81, 0x00, 0x81, 0x81, 0x24, 0xe7, 0xff, 0xff, 0xff,
	0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
	0xff, 0xff, 0xff, 0xff, 0xff, 0xfe, 0xfe, 0xfe, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfe, 0xfe,
	0xfe, 0xff, 0xff, 0xfe, 0xfe, 0xfe, 0xfe, 0xff, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe,
	0xff, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xff, 0xfe, 0xfe, 0xfe, 0xff, 0xff,
	0xff, 0xff, 0xff, 0xfe, 0xfc, 0xff, 0xff, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xff, 0xfe,
	0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xfe, 0xff, 0xff, 0xfe, 0xfe, 0xfe, 0xff, 0xff, 0xff, 0xfe, 0xfc,
	0xfc, 0xfc, 0xfe, 0xfe, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
	0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xfe, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff,
	0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff, 0xff

        };
        // clang-format on
        oled_write_raw_P(qmk_logo, sizeof(qmk_logo));
        oled_set_cursor(0, 10);
        arasaka_draw();


#    ifdef CUSTOM_UNICODE_ENABLE
        oled_set_cursor(1, 14);
        oled_write_ln_P(PSTR("Unicode:"), false);
        switch (typing_mode) {
            case UCTM_WIDE:
                oled_write_P(PSTR("        Wide"), false);
                break;
            case UCTM_SCRIPT:
                oled_write_P(PSTR("      Script"), false);
                break;
            case UCTM_BLOCKS:
                oled_write_P(PSTR("      Blocks"), false);
                break;
            case UCTM_REGIONAL:
                oled_write_P(PSTR("    Regional"), false);
                break;
            case UCTM_AUSSIE:
                oled_write_P(PSTR("      Aussie"), false);
                break;
            case UCTM_ZALGO:
                oled_write_P(PSTR("       Zalgo"), false);
                break;
            case UCTM_NO_MODE:
                oled_write_P(PSTR("      Normal"), false);
                break;
            default:
                oled_write_P(PSTR("     Unknown"), false);
                break;
        }
#    endif
    }
}
#endif




#ifdef QUANTUM_PAINTER_ENABLE
#include <qp.h>
#include <qp_ssd1351.h>
//#include "graphics/matrix.qgf.c"
#include "graphics/zerfstudios1.qgf.c"
//#include "graphics/test-anim.qgf.c"
#include "graphics/thintel.qff.c"
#include "graphics/iosevka11.qff.c"
#include "graphics/lock-caps-ON.qgf.c"
#include "graphics/lock-scrl-ON.qgf.c"
#include "graphics/cg_on.qgf.c"
#include "graphics/cg_off.qgf.c"
#include "graphics/lock-num-ON.qgf.c"
#include "graphics/lock-caps-OFF.qgf.c"
#include "graphics/lock-scrl-OFF.qgf.c"
#include "graphics/lock-num-OFF.qgf.c"
#endif



#ifdef QUANTUM_PAINTER_ENABLE
painter_device_t ili9341;
painter_device_t ssd1351;

//painter_image_handle_t ters1;
static painter_image_handle_t zerfstudios1;
static painter_font_handle_t thintel;
static painter_font_handle_t iosevka11;
//static deferred_token matrix_anim;
static painter_image_handle_t lock_caps_on;
static painter_image_handle_t lock_caps_off;
static painter_image_handle_t lock_num_on;
static painter_image_handle_t lock_num_off;
static painter_image_handle_t lock_scrl_on;
static painter_image_handle_t lock_scrl_off;
static painter_image_handle_t cg_on;
static painter_image_handle_t cg_off;

//----------------------------------------------------------
// RGB Matrix naming
#include <rgb_matrix.h>

#if defined(RGB_MATRIX_EFFECT)
#    undef RGB_MATRIX_EFFECT
#endif  // defined(RGB_MATRIX_EFFECT)

#define RGB_MATRIX_EFFECT(x) RGB_MATRIX_EFFECT_##x,
enum {
    RGB_MATRIX_EFFECT_NONE,
#include "rgb_matrix_effects.inc"
#undef RGB_MATRIX_EFFECT
#ifdef RGB_MATRIX_CUSTOM_KB
#    include "rgb_matrix_kb.inc"
#endif
#ifdef RGB_MATRIX_CUSTOM_USER
#    include "rgb_matrix_user.inc"
#endif
};

#define RGB_MATRIX_EFFECT(x)    \
    case RGB_MATRIX_EFFECT_##x: \
        return #x;
const char *rgb_matrix_name(uint8_t effect) {
    switch (effect) {
        case RGB_MATRIX_EFFECT_NONE:
            return "NONE";
#include "rgb_matrix_effects.inc"
#undef RGB_MATRIX_EFFECT
#ifdef RGB_MATRIX_CUSTOM_KB
#    include "rgb_matrix_kb.inc"
#endif
#ifdef RGB_MATRIX_CUSTOM_USER
#    include "rgb_matrix_user.inc"
#endif
        default:
            return "UNKNOWN";
    }
}

// static uint32_t delayed_test(uint32_t trigger_time, void *cb_arg) {
//     uint16_t        timeout = (uint16_t)(uintptr_t)cb_arg;
//     static uint32_t last    = 0;
//     uint32_t        now     = timer_read32();

//     if (!thintel) {
//         thintel = qp_load_font_mem(font_thintel);
//     }

//     dprintf("AHOY THERE MATEY @ %d: %d, delta = %d, font = %s\n", (int)timeout, (int)now, (int)(now - last), thintel != NULL ? "loaded" : "failed");
//     last = now;
//     return timeout;
// }

void init_and_clear(painter_device_t device, painter_rotation_t rotation) {
    uint16_t width;
    uint16_t height;
    qp_get_geometry(device, &width, &height, NULL, NULL, NULL);

    qp_init(device, rotation);
    qp_rect(device, 0, 0, width - 1, height - 1, 0, 0, 0, true);
}


void draw_ui_user(void) {
    bool            hue_redraw = false, cpi_redraw = false;
    static uint16_t last_hue   = 0xFFFF;
    uint8_t         curr_hue   = rgb_matrix_get_hue();
    static uint16_t last_cpi   = 0xFFFF;
    uint16_t        curr_cpi   = charybdis_get_pointer_sniping_enabled() ? charybdis_get_pointer_sniping_dpi() : charybdis_get_pointer_default_dpi();
    uint16_t width;
    uint16_t height;
    qp_get_geometry(ssd1351, &width, &height, NULL, NULL, NULL);

    if (last_hue != curr_hue) {
        last_hue   = curr_hue;
        hue_redraw = true;
    }
    if (last_cpi != curr_cpi) {
        last_cpi   = curr_cpi;
        cpi_redraw = true;
    }

    bool            layer_state_redraw = false;
    static uint32_t last_layer_state   = 0;
    if (last_layer_state != layer_state) {
        last_layer_state   = layer_state;
        layer_state_redraw = true;
    }

    bool            dl_state_redraw = false;
    static uint32_t last_dl_state   = 0;
    if (last_dl_state != default_layer_state) {
        last_dl_state   = default_layer_state;
        dl_state_redraw = true;
    }

    bool            ds_state_redraw = false;
    static uint32_t last_ds_state   = 0;
    if (last_ds_state != charybdis_get_pointer_dragscroll_enabled()) {
        last_ds_state   = charybdis_get_pointer_dragscroll_enabled();
        ds_state_redraw = true;
    }


    bool            sp_state_redraw = false;
    static uint32_t last_sp_state   = 0;
    if (last_sp_state != charybdis_get_pointer_sniping_enabled()) {
        last_sp_state  = charybdis_get_pointer_sniping_enabled();
        sp_state_redraw = true;
    }

    bool            am_state_redraw = false;
    static uint32_t last_am_state   = 0;
    if (last_am_state != charybdis_get_auto_mouse_enabled()) {
        last_am_state = charybdis_get_auto_mouse_enabled();
        am_state_redraw = true;
    }

    bool            wpm_redraw      = false;
    static uint32_t last_wpm_update = 0;
    if (timer_elapsed32(last_wpm_update) > 125) {
        last_wpm_update = timer_read32();
        wpm_redraw      = true;
    }

    bool            scan_redraw      = false;
    static uint32_t last_scan_update = 0;
    if (timer_elapsed32(last_scan_update) > 125) {
        last_scan_update = timer_read32();
        scan_redraw      = true;
    }

#if defined(RGB_MATRIX_ENABLE)
    bool            rgb_effect_redraw = false;
    static uint16_t last_effect       = 0xFFFF;
    uint8_t         curr_effect       = rgb_matrix_config.mode;
    if (last_effect != curr_effect) {
        last_effect       = curr_effect;
        rgb_effect_redraw = true;
    }
#endif
    int yrpos = 13;
    if (!is_keyboard_left()) {
        char buf[32] = {0};
        int  xpos    = 5;
        // if (hue_redraw) {
        //     qp_drawimage_recolor(ssd1351, 0, 128 - zerfstudios1->height,  zerfstudios1, curr_hue, 255, 255, curr_hue, 255, 0);
        // }

        yrpos += iosevka11->line_height + 4;
        if (hue_redraw || wpm_redraw) {
            static int max_wpm_xpos = 0;
            xpos                    = 5;
            snprintf(buf, sizeof(buf), "WPM: %d", (int)get_current_wpm());
            xpos += qp_drawtext_recolor(ssd1351, xpos, yrpos, iosevka11, buf, curr_hue, 255, 255, curr_hue, 255, 0);
            if (max_wpm_xpos < xpos) {
                max_wpm_xpos = xpos;
            }
            qp_rect(ssd1351, xpos, yrpos, max_wpm_xpos, yrpos + iosevka11->line_height, 0, 0, 0, true);

        }

        yrpos += iosevka11->line_height + 4;
        if (hue_redraw || scan_redraw) {
            static int max_scans_xpos = 0;
            xpos                      = 5;
            snprintf(buf, sizeof(buf), "SCANS: %d", (int)get_matrix_scan_rate());
            xpos += qp_drawtext_recolor(ssd1351, xpos, yrpos, iosevka11, buf, curr_hue, 255, 255, curr_hue, 255, 0);
            if (max_scans_xpos < xpos) {
                max_scans_xpos = xpos;
            }
            qp_rect(ssd1351, xpos, yrpos, max_scans_xpos, yrpos + iosevka11->line_height, 0, 0, 0, true);
        }

        yrpos += iosevka11->line_height + 4;
        if (hue_redraw || ds_state_redraw) {
            static int max_dss_xpos = 0;
            xpos                    = 5;
            const char* buf = charybdis_get_pointer_dragscroll_enabled() ? "DS:ACTIVE" : "DS:OFF";
            xpos += qp_drawtext_recolor(ssd1351, xpos, yrpos, iosevka11, buf, charybdis_get_pointer_dragscroll_enabled() ? 153 : 255, 255, 255, charybdis_get_pointer_dragscroll_enabled() ? 153 : 255, 255, 0);
            if (max_dss_xpos < xpos) {
                max_dss_xpos = xpos;
            }
            qp_rect(ssd1351, xpos, yrpos, max_dss_xpos, yrpos + iosevka11->line_height, 0, 0, 0, true);

        }


        if (hue_redraw || am_state_redraw) {
            static int max_ams_xpos = 0;
            xpos                    = 5 + (qp_textwidth(iosevka11, "DS: ACTIVE"));
            const char* buf = charybdis_get_auto_mouse_enabled() ? "AM:ACTIVE" : "AM:OFF";
            xpos += qp_drawtext_recolor(ssd1351, xpos, yrpos, iosevka11, buf, charybdis_get_auto_mouse_enabled()  ? 34 : 255, 255, 255, charybdis_get_pointer_sniping_enabled() ? 34 : 255, 255, 0);
            if (max_ams_xpos < xpos) {
                max_ams_xpos = xpos;
            }
            qp_rect(ssd1351, xpos, yrpos, max_ams_xpos, yrpos + iosevka11->line_height, 0, 0, 0, true);

        }

        yrpos += iosevka11->line_height + 4;
        if (hue_redraw || sp_state_redraw) {
            static int max_sps_xpos = 0;
            xpos                    = 5;
            const char* buf = charybdis_get_pointer_sniping_enabled() ? "SN:ACTIVE" : "SN:OFF";
            xpos += qp_drawtext_recolor(ssd1351, xpos, yrpos, iosevka11, buf, charybdis_get_pointer_sniping_enabled() ? 153 : 255, 255, 255, charybdis_get_pointer_sniping_enabled() ? 153 : 255, 255, 0);
            if (max_sps_xpos < xpos) {
                max_sps_xpos = xpos;
            }
            qp_rect(ssd1351, xpos, yrpos, max_sps_xpos, yrpos + iosevka11->line_height, 0, 0, 0, true);

        }



        static led_t last_led_state = {0};
        if (hue_redraw || last_led_state.raw != host_keyboard_led_state().raw) {
            last_led_state.raw = host_keyboard_led_state().raw;
            qp_drawimage_recolor(ssd1351, 128 - (32 * 3), 0, last_led_state.caps_lock ? lock_caps_on : lock_caps_off, curr_hue, 255, last_led_state.caps_lock ? 255 : 32, curr_hue, 255, 0);
            qp_drawimage_recolor(ssd1351, 128 - (32 * 2), 0, last_led_state.num_lock ? lock_num_on : lock_num_off, curr_hue, 255, last_led_state.num_lock ? 255 : 32, curr_hue, 255, 0);
            qp_drawimage_recolor(ssd1351, 128 - (32 * 1), 0, last_led_state.scroll_lock ? lock_scrl_on : lock_scrl_off, curr_hue, 255, last_led_state.scroll_lock ? 255 : 32, curr_hue, 255, 0);
        }

        static keymap_config_t last_keymap_config = {0};
        if (hue_redraw || last_keymap_config.raw != keymap_config.raw) {
            last_keymap_config.raw = keymap_config.raw;
            static int max_bpm_xpos = 0;
            xpos                    = cg_off->width;
            yrpos                    = 128 - (cg_off->height);
            const char* buf = "NKRO ";
            //kconst char* buf1 = "CRCT ";
            const char* buf2 = "1SHOT ";
            // snprintf(buf, sizeof(buf), );
            // snprintf(buf1, sizeof(buf1), "CRCT");
            // snprintf(buf2, sizeof(buf2), "1SHOT");
            // snprintf(buf3, sizeof(buf3), "SWAP");
            qp_drawimage(ssd1351, 0, yrpos, last_keymap_config.swap_lctl_lgui ? cg_on : cg_off);
            xpos += qp_drawtext_recolor(ssd1351, xpos, yrpos, iosevka11, buf, last_keymap_config.nkro? 153 : 255, 255, 255, last_keymap_config.nkro ? 153 : 255, 255, 0);
            //xpos += qp_drawtext_recolor(ssd1351, xpos, yrpos, iosevka11, buf1, last_keymap_config.autocorrect_enable? 153 : 255, 255, 255, last_keymap_config.autocorrect_enable ? 153 : 255, 255, 0);
            xpos += qp_drawtext_recolor(ssd1351, xpos, yrpos, iosevka11, buf2, last_keymap_config.oneshot_enable? 153 : 255, 255, 255, last_keymap_config.oneshot_enable ? 153 : 255, 255, 0);
            if (max_bpm_xpos < xpos) {
                max_bpm_xpos = xpos;
            }
            qp_rect(ssd1351, xpos, yrpos, max_bpm_xpos, yrpos + iosevka11->line_height, 0, 0, 0, true);

        }
    }

    int ypos = 0;
    if (is_keyboard_left()) {
        char buf[32] = {0};
        int  xpos    = 5;

        if (hue_redraw)  {
        qp_drawimage_recolor(ssd1351, 0, 128 - zerfstudios1->height,  zerfstudios1, curr_hue, 255, 255, curr_hue, 255, 0);
        }

        ypos += iosevka11->line_height;
        if (hue_redraw || rgb_effect_redraw) {
            static int max_rgb_xpos = 0;
            xpos                    = 5;
            snprintf(buf, sizeof(buf), "RGB: %s", rgb_matrix_name(curr_effect));

            for (int i = 5; i < sizeof(buf); ++i) {
                if (buf[i] == 0)
                    break;
                else if (buf[i] == '_')
                    buf[i] = ' ';
                else if (buf[i - 1] == ' ')
                    buf[i] = toupper(buf[i]);
                else if (buf[i - 1] != ' ')
                    buf[i] = tolower(buf[i]);
            }

            xpos += qp_drawtext_recolor(ssd1351, xpos, ypos, thintel, buf, curr_hue, 255, 255, curr_hue, 255, 0);
            if (max_rgb_xpos < xpos) {
                max_rgb_xpos = xpos;
            }
            qp_rect(ssd1351, xpos, ypos, max_rgb_xpos, ypos + iosevka11->line_height, 0, 0, 0, true);
        }

        ypos += iosevka11->line_height + 4;
        if (hue_redraw || dl_state_redraw) {
            const char *dl_name = "unknown";
            switch (get_highest_layer(default_layer_state)) {
                case _COLEMAK_DH:
                    dl_name = "COLEMAK_DH";
                    break;
                case _COLEMAK:
                    dl_name = "COLEMAK";
                    break;
                case _QWERTY:
                    dl_name = "QWERTY:";
                    break;
                case _DVORAK:
                    dl_name = "DVORAK";
                    break;
            }

            static int max_layer_xpos = 0;
            xpos                      = 5;
            snprintf(buf, sizeof(buf), "LAYOUT: %s", dl_name);
            xpos += qp_drawtext_recolor(ssd1351, xpos, ypos, iosevka11, buf, curr_hue, 255, 255, curr_hue, 255, 0);
            if (max_layer_xpos < xpos) {
                max_layer_xpos = xpos;
            }
            qp_rect(ssd1351, xpos, ypos, max_layer_xpos, ypos + iosevka11->line_height, 0, 0, 0, true);

        }

        ypos += iosevka11->line_height + 4;
        if (hue_redraw || layer_state_redraw) {
            const char *layer_name = "default";
            switch (get_highest_layer(layer_state)) {
                case _MOUSE:
                    layer_name = "mouse";
                    break;
                case _LOWER:
                    layer_name = "lower";
                    break;
                case _RAISE:
                    layer_name = "raise";
                    break;
                case _ADJUST:
                    layer_name = "adjust";
                    break;
                case _KEYPAD:
                    layer_name = "keypad";
                case _MEDIA:
                    layer_name = "keypad";
                    break;
            }

            static int max_layer_xpos = 0;
            xpos                      = 5;
            snprintf(buf, sizeof(buf), "LAYER: %s", layer_name);
            xpos += qp_drawtext_recolor(ssd1351, xpos, ypos, iosevka11, buf, curr_hue, 255, 255, curr_hue, 255, 0);
            if (max_layer_xpos < xpos) {
                max_layer_xpos = xpos;
            }
            qp_rect(ssd1351, xpos, ypos, max_layer_xpos, ypos + iosevka11->line_height, 0, 0, 0, true);

        }

        ypos += iosevka11->line_height + 4;
        if (hue_redraw || cpi_redraw) {
            static int max_cpi_xpos = 0;
            xpos                      = 5;
            snprintf(buf, sizeof(buf), "CPI: %d", (int)charybdis_get_pointer_sniping_enabled() ? charybdis_get_pointer_sniping_dpi() : charybdis_get_pointer_default_dpi());
            xpos += qp_drawtext_recolor(ssd1351, xpos, ypos, iosevka11, buf, curr_hue, 255, 255, curr_hue, 255, 0);
            if (max_cpi_xpos < xpos) {
                max_cpi_xpos = xpos;
            }
            qp_rect(ssd1351, xpos, ypos, max_cpi_xpos, ypos + iosevka11->line_height, 0, 0, 0, true);
        }


        ypos += iosevka11->line_height + 4;
        static user_runtime_config_t last_user_state = {0};
        if (hue_redraw || last_user_state.raw != user_state.raw) {
            last_user_state.raw = user_state.raw;
            static int max_upm_xpos = 0;
            xpos                    = qp_textwidth(iosevka11, "CLCK");
            ypos                    = 128 - (iosevka11->line_height);
            const char* buf = "AUD ";
            const char* buf1 = "CLCK ";
            const char* buf2 = "HOST ";
            const char* buf3 = "SWAP ";
            qp_drawtext_recolor(ssd1351, 0, ypos, iosevka11, buf, last_user_state.audio_enable? 153 : 255, 255, 255, last_user_state.audio_enable ? 153 : 255, 255, 0);
            xpos += qp_drawtext_recolor(ssd1351, xpos, ypos, iosevka11, buf1, last_user_state.audio_clicky_enable ? 153 : 255, 255, 255, last_user_state.audio_clicky_enable ? 153 : 255, 255, 0);
            xpos += qp_drawtext_recolor(ssd1351, xpos, ypos, iosevka11, buf2, last_user_state.host_driver_disabled ? 153 : 255, 255, 255, last_user_state.host_driver_disabled ? 153 : 255, 255, 0);
            xpos += qp_drawtext_recolor(ssd1351, xpos, ypos, iosevka11, buf3, last_user_state.swap_hands ? 153 : 255, 255, 255, last_user_state.swap_hands ? 153 : 255, 255, 0);
            if (max_upm_xpos < xpos) {
                max_upm_xpos = xpos;
            }
            qp_rect(ssd1351, xpos, ypos, max_upm_xpos, ypos + iosevka11->line_height, 0, 0, 0, true);
        }
    }
    qp_flush(ssd1351);

}


void keyboard_post_init_keymap(void) {
    debug_enable   = true;

    // debug_matrix   = true;
    // debug_keyboard = true;


    // defer_exec(3000, delayed_test, (void *)(uint16_t)3000);
    // defer_exec(3000, delayed_test, (void *)(uint16_t)3000);

    //ters1 = qp_load_image_mem(gfx_ters1);
    zerfstudios1 = qp_load_image_mem(gfx_zerfstudios1);
    lock_caps_on  = qp_load_image_mem(gfx_lock_caps_ON);
    lock_caps_off = qp_load_image_mem(gfx_lock_caps_OFF);
    lock_num_on   = qp_load_image_mem(gfx_lock_NUM_ON);
    lock_num_off  = qp_load_image_mem(gfx_lock_NUM_OFF);
    lock_scrl_on  = qp_load_image_mem(gfx_lock_scrl_ON);
    lock_scrl_off = qp_load_image_mem(gfx_lock_scrl_off);

    cg_on = qp_load_image_mem(gfx_cg_on);
    cg_off  = qp_load_image_mem(gfx_cg_off);
    thintel = qp_load_font_mem(font_thintel);
    iosevka11 = qp_load_font_mem(font_iosevka11);

    ssd1351 = qp_ssd1351_make_spi_device(128, 128, DISPLAY_CS_PIN_1_5_INCH_OLED_SSD1351, DISPLAY_DC_PIN, DISPLAY_RST_PIN_1_5_INCH_OLED_SSD1351, 8, 0);
    init_and_clear(ssd1351, QP_ROTATION_270);
    kb_state.lcd_power = 1;
    qp_power(ssd1351, true);

    wait_ms(50);

    // if (!is_keyboard_left()) {
    // qp_animate(ssd1351, 128 - matrix->width,  110 - (matrix->height + iosevka11->line_height), matrix);
    // }

}

#endif


layer_state_t layer_state_set_keymap(layer_state_t state) {
    switch (get_highest_layer(state)) {
        case _LOWER:
#ifdef HAPTIC_ENABLE
            DRV_pulse(soft_bump);
#endif
            break;
        case _RAISE:
#ifdef HAPTIC_ENABLE
            DRV_pulse(transition_rampup_short_sharp1_50);
#endif
            break;
        case _ADJUST:
#ifdef HAPTIC_ENABLE
            DRV_pulse(lg_dblclick_str);
#endif
            break;
        case _KEYPAD:
#ifdef HAPTIC_ENABLE
            DRV_pulse(transition_rampdown_long_smooth2);
#endif
            break;
        case _MOUSE:
#ifdef HAPTIC_ENABLE
            DRV_pulse(soft_bump);
#endif
            break;
        case _MEDIA:
#ifdef HAPTIC_ENABLE
            DRV_pulse(pulsing_sharp);
#endif
            break;
    }
    return state;
}



#include "combos.c"


void matrix_io_delay(void) {
    __asm__ volatile("nop\nnop\nnop\n");
}

void matrix_output_unselect_delay(uint8_t line, bool key_pressed) {
    for (int32_t i = 0; i < 40; i++) {
        __asm__ volatile("nop" ::: "memory");
    }
}
